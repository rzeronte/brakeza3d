"use strict";(globalThis.webpackChunkmi_sitio=globalThis.webpackChunkmi_sitio||[]).push([[4702],{8453(e,n,t){t.d(n,{R:()=>o,x:()=>r});var i=t(6540);const l={},s=i.createContext(l);function o(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),i.createElement(s.Provider,{value:n},e.children)}},9636(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>a,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"scripting-api/lighting-system","title":"Lighting system","description":"Lighting system API in Brakeza3D including global illumination methods, LightPoint, and LightSpot objects.","source":"@site/docs/4-scripting-api/7-lighting-system.md","sourceDirName":"4-scripting-api","slug":"/scripting-api/lighting-system","permalink":"/docs/scripting-api/lighting-system","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"Lighting system","description":"Lighting system API in Brakeza3D including global illumination methods, LightPoint, and LightSpot objects."},"sidebar":"tutorialSidebar","previous":{"title":"Particle emitter","permalink":"/docs/scripting-api/particle-emitter"},"next":{"title":"Collision system","permalink":"/docs/scripting-api/collision-system"}}');var l=t(4848),s=t(8453);const o={sidebar_position:8,title:"Lighting system",description:"Lighting system API in Brakeza3D including global illumination methods, LightPoint, and LightSpot objects."},r="Lighting system",d={},c=[{value:"Global Illumination API",id:"global-illumination-api",level:2},{value:"ADS Component Methods",id:"ads-component-methods",level:3},{value:"Examples",id:"examples",level:3},{value:"LightPoint",id:"lightpoint",level:2},{value:"Creating a LightPoint",id:"creating-a-lightpoint",level:3},{value:"Attenuation Methods",id:"attenuation-methods",level:3},{value:"Color Methods",id:"color-methods",level:3},{value:"Position and Transformation",id:"position-and-transformation",level:3},{value:"LightSpot",id:"lightspot",level:2},{value:"Creating a LightSpot",id:"creating-a-lightspot",level:3},{value:"Spotlight-Specific Methods",id:"spotlight-specific-methods",level:3},{value:"Direction Control",id:"direction-control",level:3},{value:"Practical Examples",id:"practical-examples",level:2},{value:"Day/Night Cycle",id:"daynight-cycle",level:3},{value:"Flickering Torch",id:"flickering-torch",level:3},{value:"Flashlight Following Player",id:"flashlight-following-player",level:3},{value:"Method Summary",id:"method-summary",level:2},{value:"Global Illumination (via Components())",id:"global-illumination-via-components",level:3},{value:"LightPoint",id:"lightpoint-1",level:3},{value:"LightSpot (inherits LightPoint)",id:"lightspot-inherits-lightpoint",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"lighting-system",children:"Lighting system"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.p,{children:["This section covers the LUA API for controlling lights in ",(0,l.jsx)(n.strong,{children:"Brakeza3D"}),"."]}),"\n",(0,l.jsx)(n.admonition,{type:"tip",children:(0,l.jsxs)(n.p,{children:["For conceptual understanding of the ADS model, light types, and shadow mapping, see ",(0,l.jsx)(n.a,{href:"../engine-concepts/global-illumination",children:"Global Illumination Concepts"}),"."]})}),"\n",(0,l.jsx)(n.h2,{id:"global-illumination-api",children:"Global Illumination API"}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.p,{children:"Access global illumination through the Render component:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"local render = Components:Render()\n"})}),"\n",(0,l.jsx)(n.h3,{id:"ads-component-methods",children:"ADS Component Methods"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Method"}),(0,l.jsx)(n.th,{children:"Parameter"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setGlobalIlluminationAmbient(v)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"Vertex3D"})}),(0,l.jsx)(n.td,{children:"Sets the ambient light color/intensity"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setGlobalIlluminationDiffuse(v)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"Vertex3D"})}),(0,l.jsx)(n.td,{children:"Sets the diffuse light color/intensity"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setGlobalIlluminationSpecular(v)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"Vertex3D"})}),(0,l.jsx)(n.td,{children:"Sets the specular light color/intensity"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setGlobalIlluminationDirection(v)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"Vertex3D"})}),(0,l.jsx)(n.td,{children:"Sets the light direction (sun angle)"})]})]})]}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["ADS components use ",(0,l.jsx)(n.code,{children:"Vertex3D"})," (values 0-1) instead of ",(0,l.jsx)(n.code,{children:"Color"})," for convenience."]})}),"\n",(0,l.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"-- Set warm ambient light\nComponents:Render():setGlobalIlluminationAmbient(Vertex3D.new(0.3, 0.2, 0.1))\n\n-- Set bright white diffuse\nComponents:Render():setGlobalIlluminationDiffuse(Vertex3D.new(1, 1, 1))\n\n-- Set subtle specular\nComponents:Render():setGlobalIlluminationSpecular(Vertex3D.new(0.5, 0.5, 0.5))\n\n-- Sun coming from top-right\nComponents:Render():setGlobalIlluminationDirection(Vertex3D.new(1, -1, 0.5))\n"})}),"\n",(0,l.jsx)(n.h2,{id:"lightpoint",children:"LightPoint"}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.p,{children:["A point light emits light in all directions from a single position. It inherits from ",(0,l.jsx)(n.code,{children:"Object3D"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"creating-a-lightpoint",children:"Creating a LightPoint"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"local light = ObjectFactory.LightPoint(\n    Vertex3D.new(10, 20, 30),       -- position\n    Color.new(0.1, 0.1, 0.1),       -- ambient component\n    Color.new(0.8, 0.6, 0.4),       -- diffuse component\n    Color.new(1.0, 1.0, 1.0)        -- specular component\n)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"attenuation-methods",children:"Attenuation Methods"}),"\n",(0,l.jsx)(n.p,{children:"Control how light intensity decreases with distance:"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Method"}),(0,l.jsx)(n.th,{children:"Parameter"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setConstant(v)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"float"})}),(0,l.jsx)(n.td,{children:"Base intensity (default: 1.0)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setLinear(v)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"float"})}),(0,l.jsx)(n.td,{children:"Linear falloff factor"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setCuadratic(v)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"float"})}),(0,l.jsx)(n.td,{children:"Quadratic falloff factor"})]})]})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"-- Soft, far-reaching light\nlight:setConstant(1.0)\nlight:setLinear(0.09)\nlight:setCuadratic(0.032)\n\n-- Intense, short-range light\nlight:setConstant(1.0)\nlight:setLinear(0.7)\nlight:setCuadratic(1.8)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"color-methods",children:"Color Methods"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Method"}),(0,l.jsx)(n.th,{children:"Parameter"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setAmbient(c)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"Color"})}),(0,l.jsx)(n.td,{children:"Sets ambient contribution"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setColor(c)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"Color"})}),(0,l.jsx)(n.td,{children:"Sets diffuse color"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setColorSpecular(c)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"Color"})}),(0,l.jsx)(n.td,{children:"Sets specular color"})]})]})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"-- Change to red light\nlight:setColor(Color.new(1, 0, 0, 1))\nlight:setColorSpecular(Color.new(1, 0.5, 0.5, 1))\n"})}),"\n",(0,l.jsx)(n.h3,{id:"position-and-transformation",children:"Position and Transformation"}),"\n",(0,l.jsxs)(n.p,{children:["As an ",(0,l.jsx)(n.code,{children:"Object3D"}),", use standard methods:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"light:setPosition(Vertex3D.new(x, y, z))\nlight:setEnabled(true)\nlight:setRemoved(true)  -- delete light\n"})}),"\n",(0,l.jsx)(n.h2,{id:"lightspot",children:"LightSpot"}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.p,{children:["A spotlight emits light in a specific direction with a cone shape. It inherits from ",(0,l.jsx)(n.code,{children:"LightPoint"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"creating-a-lightspot",children:"Creating a LightSpot"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"local spot = ObjectFactory.LightSpot(\n    Vertex3D.new(0, 10, 0),         -- position\n    Color.new(0.0, 0.0, 0.0),       -- ambient\n    Color.new(1.0, 1.0, 1.0),       -- diffuse\n    Color.new(1.0, 1.0, 1.0)        -- specular\n)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"spotlight-specific-methods",children:"Spotlight-Specific Methods"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Method"}),(0,l.jsx)(n.th,{children:"Parameter"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setCutOff(v)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"float"})}),(0,l.jsx)(n.td,{children:"Inner cone angle (sharp edge)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setOuterCutOff(v)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"float"})}),(0,l.jsx)(n.td,{children:"Outer cone angle (soft edge)"})]})]})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"-- Narrow flashlight beam\nspot:setCutOff(12.5)\nspot:setOuterCutOff(17.5)\n\n-- Wide floodlight\nspot:setCutOff(30.0)\nspot:setOuterCutOff(45.0)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"direction-control",children:"Direction Control"}),"\n",(0,l.jsxs)(n.p,{children:["Use ",(0,l.jsx)(n.code,{children:"LookAt"})," or rotation to aim the spotlight:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Point at an object\nlocal target = Brakeza:getObjectByName("Enemy")\nspot:LookAt(target)\n\n-- Or set position to follow player and look down\nspot:setPosition(player:getPosition() + Vertex3D.new(0, 10, 0))\nspot:LookAt(player)\n'})}),"\n",(0,l.jsx)(n.h2,{id:"practical-examples",children:"Practical Examples"}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"daynight-cycle",children:"Day/Night Cycle"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"local timeOfDay = 0\n\nfunction onUpdate()\n    local dt = Brakeza:getDeltaTime()\n    timeOfDay = timeOfDay + dt * 0.1  -- slow cycle\n\n    local render = Components:Render()\n\n    -- Sun angle\n    local sunY = math.sin(timeOfDay)\n    local sunX = math.cos(timeOfDay)\n    render:setGlobalIlluminationDirection(Vertex3D.new(sunX, sunY, 0.3))\n\n    -- Adjust colors based on time\n    if sunY > 0 then\n        -- Daytime\n        render:setGlobalIlluminationAmbient(Vertex3D.new(0.3, 0.3, 0.35))\n        render:setGlobalIlluminationDiffuse(Vertex3D.new(1, 0.95, 0.9))\n    else\n        -- Nighttime\n        render:setGlobalIlluminationAmbient(Vertex3D.new(0.05, 0.05, 0.1))\n        render:setGlobalIlluminationDiffuse(Vertex3D.new(0.2, 0.2, 0.3))\n    end\nend\n"})}),"\n",(0,l.jsx)(n.h3,{id:"flickering-torch",children:"Flickering Torch"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"local torch\n\nfunction onStart()\n    torch = ObjectFactory.LightPoint(\n        Vertex3D.new(0, 5, 0),\n        Color.new(0.1, 0.05, 0.0),\n        Color.new(1.0, 0.6, 0.2),\n        Color.new(1.0, 0.8, 0.4)\n    )\n    torch:setLinear(0.14)\n    torch:setCuadratic(0.07)\nend\n\nfunction onUpdate()\n    local time = Brakeza:getExecutionTime()\n\n    -- Random flicker\n    local flicker = 0.8 + math.random() * 0.4\n    local pulse = 0.9 + math.sin(time * 10) * 0.1\n\n    local intensity = flicker * pulse\n    torch:setColor(Color.new(intensity, intensity * 0.6, intensity * 0.2, 1))\nend\n"})}),"\n",(0,l.jsx)(n.h3,{id:"flashlight-following-player",children:"Flashlight Following Player"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"local flashlight\n\nfunction onStart()\n    flashlight = ObjectFactory.LightSpot(\n        Vertex3D.new(0, 0, 0),\n        Color.new(0, 0, 0),\n        Color.new(1, 1, 0.9),\n        Color.new(1, 1, 1)\n    )\n    flashlight:setCutOff(15)\n    flashlight:setOuterCutOff(20)\nend\n\nfunction onUpdate()\n    local camera = Components:Camera():getCamera()\n\n    -- Position at camera\n    flashlight:setPosition(camera:getPosition())\n\n    -- Match camera rotation\n    flashlight:setRotation(camera:getRotation())\nend\n"})}),"\n",(0,l.jsx)(n.h2,{id:"method-summary",children:"Method Summary"}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.h3,{id:"global-illumination-via-components",children:["Global Illumination (via Components",":Render","())"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Method"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setGlobalIlluminationAmbient(Vertex3D)"})}),(0,l.jsx)(n.td,{children:"Set ambient color"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setGlobalIlluminationDiffuse(Vertex3D)"})}),(0,l.jsx)(n.td,{children:"Set diffuse color"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setGlobalIlluminationSpecular(Vertex3D)"})}),(0,l.jsx)(n.td,{children:"Set specular color"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setGlobalIlluminationDirection(Vertex3D)"})}),(0,l.jsx)(n.td,{children:"Set light direction"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"lightpoint-1",children:"LightPoint"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Method"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setConstant(float)"})}),(0,l.jsx)(n.td,{children:"Base attenuation"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setLinear(float)"})}),(0,l.jsx)(n.td,{children:"Linear attenuation"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setCuadratic(float)"})}),(0,l.jsx)(n.td,{children:"Quadratic attenuation"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setAmbient(Color)"})}),(0,l.jsx)(n.td,{children:"Ambient color"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setColor(Color)"})}),(0,l.jsx)(n.td,{children:"Diffuse color"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setColorSpecular(Color)"})}),(0,l.jsx)(n.td,{children:"Specular color"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"lightspot-inherits-lightpoint",children:"LightSpot (inherits LightPoint)"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Method"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setCutOff(float)"})}),(0,l.jsx)(n.td,{children:"Inner cone angle"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"setOuterCutOff(float)"})}),(0,l.jsx)(n.td,{children:"Outer cone angle"})]})]})]})]})}function a(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}}}]);