"use strict";(globalThis.webpackChunkmi_sitio=globalThis.webpackChunkmi_sitio||[]).push([[7225],{524(e,i,n){n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"scripting-api/grid-and-octree","title":"Grid and Octree","description":"Grid3D and Octree data structures in Brakeza3D for spatial partitioning and A* pathfinding.","source":"@site/docs/4-scripting-api/12-grid-and-octree.md","sourceDirName":"4-scripting-api","slug":"/scripting-api/grid-and-octree","permalink":"/docs/scripting-api/grid-and-octree","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":13,"frontMatter":{"sidebar_position":13,"title":"Grid and Octree","description":"Grid3D and Octree data structures in Brakeza3D for spatial partitioning and A* pathfinding."},"sidebar":"tutorialSidebar","previous":{"title":"Shaders system","permalink":"/docs/scripting-api/shaders-system"},"next":{"title":"Components","permalink":"/docs/scripting-api/components"}}');var t=n(4848),s=n(8453);const a={sidebar_position:13,title:"Grid and Octree",description:"Grid3D and Octree data structures in Brakeza3D for spatial partitioning and A* pathfinding."},d="Grid3D and Octree",o={},c=[{value:"Filling Geometry in Grid3D",id:"filling-geometry-in-grid3d",level:2},{value:"Pathfinding in Grid3D",id:"pathfinding-in-grid3d",level:2},{value:"Click object detection",id:"click-object-detection",level:2}];function l(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"grid3d-and-octree",children:"Grid3D and Octree"})}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Brakeza3D"})," includes Grid3D and Octree data structures integrated into Mesh3D objects."]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"Grid3D"}),": Creates a grid of X, Y, Z dimensions over the AABB of the given object."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"Octree"}),": Creates an octree with the specified depth (maxDepth)."]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"To create a grid in a Mesh3D object, use BuildGrid3D(sizeX, sizeY, sizeZ):"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-lua",children:'eye = ObjectFactory.Mesh3D(\n    "../assets/models/Capsule.fbx",\n    Vertex3D.new(x, y, z)\n)\neye:BuildGrid3D(5, 5, 5)                                                    -- creates a 5x5x5 grid\n'})}),"\n",(0,t.jsxs)(i.p,{children:["To create an octree use ",(0,t.jsx)(i.code,{children:"BuildOctree(int maxDepth)"}),":"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-lua",children:'eye = ObjectFactory.Mesh3D("../assets/models/Capsule.fbx", Vertex3D.new(x, y, z))\neye:BuildOctree(1) -- crea una \xe1rbol de octanos de un solo nivel de profundidad, solo 8 hijos\n'})}),"\n",(0,t.jsxs)(i.p,{children:["To readjust the dimensions of both grids and octree structures, simply rerun ",(0,t.jsx)(i.code,{children:"buildGrid3D()"})," or ",(0,t.jsx)(i.code,{children:"buildOctree()"}),"."]}),"\n",(0,t.jsx)(i.h2,{id:"filling-geometry-in-grid3d",children:"Filling Geometry in Grid3D"}),"\n",(0,t.jsx)(i.p,{children:"Grid3D stores a boolean flag for each cell. Brakeza3D provides a method fillGrid3DFromGeometry, which\nsets this flag for each cell if no triangle intersects or is contained in it:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-lua",children:'eye = ObjectFactory.Mesh3D("../assets/models/Capsule.fbx", Vertex3D.new(x, y, z))\neye:BuildGrid3D(5, 5, 5)\neye:FillGrid3DFromGeometry()                -- sets flags for empty cells\n'})}),"\n",(0,t.jsx)(i.p,{children:"This is especially useful for pathfinding techniques."}),"\n",(0,t.jsx)(i.h2,{id:"pathfinding-in-grid3d",children:"Pathfinding in Grid3D"}),"\n",(0,t.jsx)(i.p,{children:"Grids include an A* algorithm that allows iterating over their cells. Combined with fillGrid3DFromGeometry,\npaths can avoid cells with geometry:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-lua",children:'eye = ObjectFactory.Mesh3D("../assets/models/Capsule.fbx", Vertex3D.new(x, y, z))\neye:BuildGrid3D(5, 5, 5)\neye:FillGrid3DFromGeometry()                    -- fill with geometry\n\neye:getGrid3D():setTravel(0, 0, 0, 5, 5, 5)     -- set travel from (0,0,0) to (5,5,5)\npath = eye:getGrid3D():MakeTravelCubesGrid()    -- returns an array of CubeGrid3D\n'})}),"\n",(0,t.jsx)(i.p,{children:"Mediante el m\xe9todo setTravel(x1, y1, z1, x2, y2, z2), podremos ajustar el viaje para el pr\xf3ximo camino\nsolicitado mediante makeTravelCubesGrid."}),"\n",(0,t.jsx)(i.p,{children:"The method MakeTravelCubesGrid returns the requested path as an array of CubeGrid3D structures:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-cpp",children:"struct CubeGrid3D {\n    AABB3D box;             // bounding box\n    int posX;               // X index in the grid\n    int posY;               // Y index\n    int posZ;               // Z index\n    bool passed = true;     // Flag\n};\n"})}),"\n",(0,t.jsx)(i.p,{children:"You can iterate over this array to obtain the desired path:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-lua",children:'...\npath = eye:getGrid3D():MakeTravelCubesGrid()            -- we get a travel path\n\nfor i, cube in ipairs(path) do\n    print("Cube " .. i .. ": X = " .. cube.posX .. ", Y = " .. cube.posY .. ", Z = " .. cube.posZ)\nend\n...\n'})}),"\n",(0,t.jsx)(i.h2,{id:"click-object-detection",children:"Click object detection"}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.p,{children:"Brakeza3D ofrece de forma nativa la funcionalidad de click sobre un Object3D. Para ello po"}),"\n",(0,t.jsx)(i.h1,{id:"complete-lua-code-examples",children:"Complete LUA Code Examples"}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.a,{href:"https://github.com/rzeronte/brakeza3d/blob/master/doc/examples-lua-code.md",children:"https://github.com/rzeronte/brakeza3d/blob/master/doc/examples-lua-code.md"}),"_"]})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453(e,i,n){n.d(i,{R:()=>a,x:()=>d});var r=n(6540);const t={},s=r.createContext(t);function a(e){const i=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(s.Provider,{value:i},e.children)}}}]);